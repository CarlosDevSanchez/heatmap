<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Mouse Move Heatmap Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="index, follow" />
<meta name="description" content="This example also demonstrates how to dynamically add data to a heatmap instance with the 'addData' function at runtime" />
<meta name="keywords" content="click heatmap, click heat, click map, mouse click map" />

<style>
    body, html, h2 { margin:0; padding:0; height:100%;}
    .demo-wrapper { width:100%; height:100%; position:absolute; background:rgba(0,0,0,.1);}
    #heatmap {width: 100%;height: 100%;}
</style>
</head>
<body onmousemove="getPos(event)">
    <div class="wrapper">
        <div class="demo-wrapper">
            <div id="heatmap">
            </div>
        </div>
        <span id="displayArea"></span>
    </div>

    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/heatmapFunction.js"></script>

    <script>
    // background
    document.body.style.backgroundImage="url('image/resolution/1366x768.png')";
    var dataXY = new Array();
    var idBrowser = cuniq();

    console.log('cokkie',document.cookie);
    //get x,y
    function getPos(e) {
        x = e.clientX;
        y = e.clientY;
        cursor = "Your Mouse Position Is : " + x + " and " + y;
        document.getElementById("displayArea").innerHTML=cursor
        // save in array
        var arrayScreem = getViewport();
        var arreglo = {
            'id' : idBrowser,
            'x' : x,
            'y' : y,
            'viewPort' : arrayScreem[0] + 'x' + arrayScreem[1],
            //'window' : ''
            'date' : _settingDateTime(new Date())
        };

        dataXY.push(arreglo);

        //console.log('arreglo', arreglo);
        //console.log('dataXY', dataXY);
    }

     /**
      * send data to server
      */
    function sendDataToServer() {

         setTimeout(function() {
             console.log("setTimeout");
             sendDataToServer();
             dataXY = new Array();

         }, 3000);

         $.ajax({
             url: 'parametros.php',
             data : {op : 'insertar', data : dataXY},
             type: 'POST',
             dataType: 'json',
             success: function (rs){
             }
         });
    }


    // Init App
    //setInterval("sendDataToServer()",5000);
    sendDataToServer();













    var eje = new Array();

    var arreglo1 = {
        'id' :111,
        'x' : 10,
        'y' : 20,
        'viewPort' : '1500x700',
        'date' : '2014-01-01 11:11:11'
    };
    var arreglo2 = {
        'id' :111,
        'x' : 10,
        'y' : 20,
        'viewPort' : '1500x700',
        'date' : '2014-01-01 11:11:11'
    };

    eje.push(arreglo1);
    eje.push(arreglo2);


console.log('eje', eje);


    </script>
</body>
</html>